name: get_api_v1_accounts_accountId_managedconfigurations_type
pipeline:
- name: http
- name: output
stages:
  http:
    kind: http
    properties:
      method: GET
      url: '{{inputs.base_url}}/api/v1/accounts/{{inputs.accountId}}/managedconfigurations/{{inputs.type}}'
      auth:
        bearer:
          token: '{{inputs.token}}'
          scheme: Bearer
      headers:
        WatchGuard-API-Key: '{{apikey}}'
      params:
        top: '{{inputs.top}}'
        skip: '{{inputs.skip}}'
        search: '{{inputs.search}}'
        count: '{{inputs.count}}'
        orderby: '{{inputs.orderby}}'
    asserts:
      error_400:
        predicate: '{{response.status_code != 400}}'
        fail: BAD REQUEST.
      error_403:
        predicate: '{{response.status_code != 403}}'
        fail: ACCESS DENIED.
      error_404:
        predicate: '{{response.status_code != 404}}'
        fail: NOT FOUND.
      error_405:
        predicate: '{{response.status_code != 405}}'
        fail: METHOD NOT ALLOWED.
      error_500:
        predicate: '{{response.status_code != 500}}'
        fail: INTERNAL ERROR.
      success:
        predicate: '{{response.status_code == 200}}'
        fail: Expected a successful (2xx) status code, got {{response.status_code}}
    captures:
      result: '{{response.json}}'
  output:
    kind: output
    properties:
      result: '{{http.result}}'
description: Retrieves a list of the specified type of managed configurations associated
  with your WatchGuard Cloud account.
inputs:
  orderby:
    type: string
    description: Specifies how to order results. You can order by any parameter in
      the response and sort results in ascending or descending order.
  type:
    type: integer
    description: Type of configuration to return. Currently, only 2-Workstations and
      servers or 3-Android are supported types for this operation.
  count:
    type: boolean
    description: Indicates whether to return a counter that shows the total number
      of objects in the total_items response parameter.
  accountId:
    type: string
    description: Your WatchGuard Cloud account ID.
  base_url:
    type: string
    description: Base URL for the API
    enum:
    - https://api.usa.cloud.watchguard.com/rest/endpoint-security/management
    - https://api.deu.cloud.watchguard.com/rest/endpoint-security/management
    - https://api.jpn.cloud.watchguard.com/rest/endpoint-security/management
  search:
    type: string
    description: Returns only objects that include the specified text string.
  skip:
    type: integer
    description: Bypasses the specified number of objects in the results returned.
  token:
    type: string
    description: The bearer token for authentication
    default: '{{token}}'
  top:
    type: integer
    description: Specifies the number of objects to retrieve (there is a maximum supported
      by the server).
